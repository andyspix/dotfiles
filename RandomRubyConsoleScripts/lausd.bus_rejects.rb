def chew (ary)
  fun = {}
  ary.each { |x| fun[x[0..1]] ||= []; fun[x[0..1]] << x[2..3] }
  pattern = ''
  fun.each { |k,v| pattern += "(#{k}(#{v.join('|')}))|" }
  pattern
end


def all_busses
  %w(2 8455 3463 3471 3473 3476 3600 3602 3606 3615 3617 3620 3625 3626 3634 3700 3701 3702 3703 3705 3707 3710 3711 3713 3714 3715 3716 3718 3720 3721 3722 3723 3724 3731 3732 3733 3734 3735 3737 3740 3741 3744 3745 3746 3749 3750 3751 3752 3753 3756 3757 3758 3761 3763 3764 3766 3767 3769 3770 3771 3774 3775 3776 3778 3784 3785 3786 3787 3789 3790 3791 3794 3795 3796 3797 3798 3799 3918 3924 3925 3928 3931 3932 3933 3934 3935 3941 3942 3944 3945 3950 3951 3952 3954 3956 3958 3960 3961 3963 3964 3966 3967 3968 3969 3971 3982 3985 3986 3987 3989 6101 6102 6103 6105 6106 6110 6115 6116 6117 6120 6128 6130 6135 6164 6165 6167 6168 6169 6171 6172 6178 6179 6189 6196 6197 6316 6320 6327 6332 6333 6336 6338 6343 6347 6348 6358 6359 6360 6365 6366 6368 6369 6372 6376 6380 6382 6383 6385 6386 6387 6388 6389 6390 6392 6394 7400 7401 7406 7407 7408 7409 7411 7412 7414 7417 7418 7420 7421 7424 7426 7429 7432 7433 7434 7435 7438 7442 7446 7447 7449 7450 7458 7466 7468 7474 7475 7478 7483 7484 7485 7486 7487 7488 7489 7553 7638 7651 7660 7661 7663 7664 7665 7666 7669 7671 7678 7684 7687 7695 7704 7715 7717 7722 7729 7734 7738 7739 7741 7743 7762 7763 7764 7766 7783 7926 7940 7941 7942 7943 7945 7946 7955 7956 7959 7960 7962 7963 7965 7966 7967 7968 7972 7975 7978 7980 7982 7986 7987 7992 8001 8002 8003 8004 8005 8006 8007 8008 8009 8010 8011 8015 8017 8018 8019 8020 8021 8022 8023 8024 8026 8029 8030 8031 8032 8033 8034 8035 8042 8044 8047 8048 8050 8053 8072 8073 8082 8099 8100 8104 8106 8120 8133 8135 8141 8142 8143 8146 8149 8155 8160 8162 8164 8165 8169 8171 8173 8185 8186 8228 8230 8231 8232 8234 8236 8239 8242 8244 8245 8248 8249 8250 8251 8252 8253 8255 8256 8257 8258 8259 8261 8262 8263 8264 8265 8266 8268 8269 8270 8271 8272 8273 8284 8400 8401 8402 8405 8407 8408 8409 8414 8418 8420 8421 8423 8424 8425 8426 8427 8429 8431 8432 8433 8439 8441 8448 8449 8450 8452 8456 8457 8460 8462 8463 8464 8466 8469 8470 8474 8477 8508 8509 8512 8514 8517 8521 8527 8528 8537 8600 8605 8607 8610 8611 8618 8619 3465 3472 3474 3601 3603 3611 3613 3614 3616 3619 3624 3628 3631 3632 3636 3639 3977 6100 6113 6114 6118 6121 6123 6124 6127 6132 6136 6137 6140 6161 6173 6175 6176 6177 6181 6182 6183 6184 6185 6186 6187 6188 6190 6191 6192 6193 6199 6378 6379 6398 7416 7422 7423 7425 7428 7430 7431 7441 7444 7445 7452 7453 7454 7455 7456 7457 7459 7460 7461 7463 7464 7467 7472 7479 7482 7501 7503 7504 7506 7507 7508 7509 7510 7512 7513 7514 7515 7517 7518 7520 7521 7522 7524 7526 7527 7528 7529 7530 7533 7535 7538 7539 7540 7541 7544 7545 7546 7547 7548 7549 7550 7551 7552 7555 7559 7560 7561 7564 7565 7566 7567 7569 7571 7575 7576 7577 7578 7579 7580 7582 7584 7585 7586 7587 7589 7590 7591 7594 7596 7597 7599 7602 7603 7604 7605 7606 7607 7608 7609 7610 7611 7612 7613 7614 7615 7616 7617 7619 7620 7623 7624 7625 7629 7630 7631 7632 7633 7637 7640 7642 7645 7647 7648 7657 7659 7662 7668 7672 7674 7677 7681 7692 7703 7706 7708 7709 7711 7712 7713 7716 7718 7719 7720 7721 7723 7725 7728 7730 7731 7732 7733 7735 7740 7742 7744 7745 7746 7748 7749 7752 7753 7754 7755 7756 7757 7758 7761 7771 7773 7774 7775 7790 7792 7901 7903 7905 7907 7908 7911 7912 7914 7915 7917 7918 7919 7920 7921 7924 7925 7927 7928 7929 7930 7931 7932 7933 7934 7935 7938 7939 7944 7949 7951 7988 7989 7990 7991 7993 7994 8052 8054 8055 8056 8057 8058 8059 8060 8061 8062 8063 8065 8066 8067 8068 8070 8076 8077 8078 8079 8080 8081 8083 8084 8085 8086 8088 8089 8090 8091 8092 8094 8095 8096 8097 8098 8102 8103 8105 8107 8108 8109 8110 8111 8112 8114 8115 8116 8117 8118 8119 8121 8126 8134 8147 8154 8156 8157 8158 8159 8163 8166 8167 8168 8170 8172 8174 8176 8178 8179 8180 8181 8182 8183 8184 8187 8189 8190 8191 8192 8193 8194 8195 8196 8197 8198 8202 8203 8204 8205 8206 8208 8212 8214 8216 8217 8219 8220 8222 8224 8226 8254 8410 8411 8412 8415 8419 8430 8458 8459 8465 8479 8501 8502 8506 8511 8524 8603 8616 8617 9120 9121 9122 9123 9124 9125 9126 9127 9128 9129 9130 9131 9132 9133 9134 9135 9136 8260 8267 8274 8275 8276 8277 8278 8279 8280 8281 8282 8283 8285 8286 8601 8602 8604 8606 8608 8609 8612 8613 8614 8615 3459 3461 3462 3466 3475 3605 3607 3608 3610 3612 3618 3621 3622 3623 3627 3629 3630 3633 3635 3637 3638 3640 3704 3706 3708 3709 3712 3717 3719 3725 3726 3727 3728 3729 3730 3736 3738 3739 3742 3743 3747 3748 3754 3755 3759 3760 3762 3765 3768 3772 3773 3777 3779 3780 3781 3782 3783 3788 3792 3793 3893 3909 3912 3913 3917 3919 3921 3922 3929 3930 3936 3937 3938 3939 3940 3943 3946 3947 3948 3955 3957 3965 3970 3972 3973 3974 3975 3976 3978 3979 3980 3981 3983 3984 3988 3990 6107 6108 6109 6111 6119 6122 6125 6126 6129 6131 6133 6134 6138 6139 6141 6142 6143 6144 6145 6162 6163 6166 6170 6174 6194 6195 6198 6269 6329 6330 6331 6334 6335 6337 6339 6340 6341 6342 6344 6345 6346 6349 6351 6352 6353 6354 6355 6356 6357 6361 6362 6363 6364 6370 6371 6375 6377 6381 6384 6391 6393 6395 6396 6397 7402 7403 7404 7405 7410 7413 7415 7419 7427 7436 7437 7439 7440 7448 7451 7462 7465 7469 7470 7471 7473 7476 7477 7480 7481 7502 7516 7519 7523 7525 7531 7532 7534 7536 7537 7542 7543 7554 7556 7557 7558 7562 7563 7568 7570 7572 7573 7574 7581 7583 7588 7592 7593 7595 7598 7600 7601 7618 7621 7622 7626 7627 7628 7634 7635 7636 7639 7641 7643 7644 7649 7650 7652 7653 7654 7655 7656 7658 7667 7670 7673 7675 7676 7679 7680 7682 7683 7685 7686 7688 7689 7690 7691 7693 7694 7696 7697 7698 7699 7700 7701 7702 7705 7707 7710 7714 7724 7726 7727 7736 7737 7747 7750 7751 7759 7760 7765 7767 7768 7769 7772 7776 7777 7778 7779 7780 7781 7782 7784 7785 7786 7787 7788 7789 7791 7793 7794 7795 7900 7902 7904 7906 7909 7910 7913 7916 7922 7923 7936 7937 7947 7948 7950 7952 7953 7954 7957 7958 7961 7964 7969 7970 7971 7973 7974 7976 7977 7979 7981 7983 7984 7985 8000 8012 8013 8014 8016 8025 8027 8028 8036 8037 8038 8039 8040 8041 8043 8045 8046 8049 8051 8064 8069 8071 8074 8075 8087 8093 8101 8113 8122 8123 8124 8125 8127 8128 8129 8130 8131 8132 8136 8137 8138 8139 8140 8144 8145 8148 8150 8151 8152 8153 8161 8175 8177 8188 8199 8200 8201 8207 8209 8210 8211 8213 8215 8218 8221 8223 8225 8227 8229 8233 8235 8237 8238 8240 8241 8243 8246 8247 8403 8404 8406 8413 8416 8417 8422 8428 8434 8435 8436 8437 8438 8440 8442 8443 8444 8445 8446 8447 8451 8453 8454 8461 8467 8468 8471 8472 8473 8475 8476 8478 8500 8503 8504 8505 8507 8510 8513 8515 8516 8518 8519 8520 8522 8523 8525 8526 8529 8530 8531 8532 8533 8534 8535 8536 8538)
end

def no_install
  %w(4345 4317 4329 4330 4333 4341 4342 4357 4358 4361 4364 4374 4379 4381 4382 4323 4326 4339 4353 4359 4363 4375 4376 4316 4318 4322 4324 4327 4332 4335 4336 4338 4348 4355 4356 4367 4371 4372 4373 4377 4380 6156 6160 6164 6165 6167 6168 6169 6171 6172 6178 6179 6189 6196 6197 91 6161 6173 6175 6176 6177 6180 6181 6182 6183 6184 6185 6186 6187 6188 6190 6191 6192 6193 6199 92 6153 6154 6157 6158 6162 6163 6166 6170 6174 6194 6195 6198 6269)
end

def chew_it
 res = all_busses - no_install - ['2']
 chew res
end

# fixed_pattern:
# ^(UNLISTED|2|(84(55|00|01|02|05|07|08|09|14|18|20|21|23|24|25|26|27|29|31|32|33|39|41|48|49|50|52|56|57|60|62|63|64|66|69|70|74|77|10|11|12|15|19|30|58|59|65|79|03|04|06|13|16|17|22|28|34|35|36|37|38|40|42|43|44|45|46|47|51|53|54|61|67|68|71|72|73|75|76|78))|(34(63|71|73|76|65|72|74|59|61|62|66|75))|(36(00|02|06|15|17|20|25|26|34|01|03|11|13|14|16|19|24|28|31|32|36|39|05|07|08|10|12|18|21|22|23|27|29|30|33|35|37|38|40))|(37(00|01|02|03|05|07|10|11|13|14|15|16|18|20|21|22|23|24|31|32|33|34|35|37|40|41|44|45|46|49|50|51|52|53|56|57|58|61|63|64|66|67|69|70|71|74|75|76|78|84|85|86|87|89|90|91|94|95|96|97|98|99|04|06|08|09|12|17|19|25|26|27|28|29|30|36|38|39|42|43|47|48|54|55|59|60|62|65|68|72|73|77|79|80|81|82|83|88|92|93))|(39(18|24|25|28|31|32|33|34|35|41|42|44|45|50|51|52|54|56|58|60|61|63|64|66|67|68|69|71|82|85|86|87|89|77|09|12|13|17|19|21|22|29|30|36|37|38|39|40|43|46|47|48|55|57|65|70|72|73|74|75|76|78|79|80|81|83|84|88|90))|(61(01|02|03|05|06|10|15|16|17|20|28|30|35|00|13|14|18|21|23|24|27|32|36|37|40|07|08|09|11|19|22|25|26|29|31|33|34|38|39|41|42|43|44|45))|(63(16|20|27|32|33|36|38|43|47|48|58|59|60|65|66|68|69|72|76|80|82|83|85|86|87|88|89|90|92|94|78|79|98|29|30|31|34|35|37|39|40|41|42|44|45|46|49|51|52|53|54|55|56|57|61|62|63|64|70|71|75|77|81|84|91|93|95|96|97))|(74(00|01|06|07|08|09|11|12|14|17|18|20|21|24|26|29|32|33|34|35|38|42|46|47|49|50|58|66|68|74|75|78|83|84|85|86|87|88|89|16|22|23|25|28|30|31|41|44|45|52|53|54|55|56|57|59|60|61|63|64|67|72|79|82|02|03|04|05|10|13|15|19|27|36|37|39|40|48|51|62|65|69|70|71|73|76|77|80|81))|(75(53|01|03|04|06|07|08|09|10|12|13|14|15|17|18|20|21|22|24|26|27|28|29|30|33|35|38|39|40|41|44|45|46|47|48|49|50|51|52|55|59|60|61|64|65|66|67|69|71|75|76|77|78|79|80|82|84|85|86|87|89|90|91|94|96|97|99|02|16|19|23|25|31|32|34|36|37|42|43|54|56|57|58|62|63|68|70|72|73|74|81|83|88|92|93|95|98))|(76(38|51|60|61|63|64|65|66|69|71|78|84|87|95|02|03|04|05|06|07|08|09|10|11|12|13|14|15|16|17|19|20|23|24|25|29|30|31|32|33|37|40|42|45|47|48|57|59|62|68|72|74|77|81|92|00|01|18|21|22|26|27|28|34|35|36|39|41|43|44|49|50|52|53|54|55|56|58|67|70|73|75|76|79|80|82|83|85|86|88|89|90|91|93|94|96|97|98|99))|(77(04|15|17|22|29|34|38|39|41|43|62|63|64|66|83|03|06|08|09|11|12|13|16|18|19|20|21|23|25|28|30|31|32|33|35|40|42|44|45|46|48|49|52|53|54|55|56|57|58|61|71|73|74|75|90|92|00|01|02|05|07|10|14|24|26|27|36|37|47|50|51|59|60|65|67|68|69|72|76|77|78|79|80|81|82|84|85|86|87|88|89|91|93|94|95))|(79(26|40|41|42|43|45|46|55|56|59|60|62|63|65|66|67|68|72|75|78|80|82|86|87|92|01|03|05|07|08|11|12|14|15|17|18|19|20|21|24|25|27|28|29|30|31|32|33|34|35|38|39|44|49|51|88|89|90|91|93|94|00|02|04|06|09|10|13|16|22|23|36|37|47|48|50|52|53|54|57|58|61|64|69|70|71|73|74|76|77|79|81|83|84|85))|(80(01|02|03|04|05|06|07|08|09|10|11|15|17|18|19|20|21|22|23|24|26|29|30|31|32|33|34|35|42|44|47|48|50|53|72|73|82|99|52|54|55|56|57|58|59|60|61|62|63|65|66|67|68|70|76|77|78|79|80|81|83|84|85|86|88|89|90|91|92|94|95|96|97|98|00|12|13|14|16|25|27|28|36|37|38|39|40|41|43|45|46|49|51|64|69|71|74|75|87|93))|(81(00|04|06|20|33|35|41|42|43|46|49|55|60|62|64|65|69|71|73|85|86|02|03|05|07|08|09|10|11|12|14|15|16|17|18|19|21|26|34|47|54|56|57|58|59|63|66|67|68|70|72|74|76|78|79|80|81|82|83|84|87|89|90|91|92|93|94|95|96|97|98|01|13|22|23|24|25|27|28|29|30|31|32|36|37|38|39|40|44|45|48|50|51|52|53|61|75|77|88|99))|(82(28|30|31|32|34|36|39|42|44|45|48|49|50|51|52|53|55|56|57|58|59|61|62|63|64|65|66|68|69|70|71|72|73|84|02|03|04|05|06|08|12|14|16|17|19|20|22|24|26|54|60|67|74|75|76|77|78|79|80|81|82|83|85|86|00|01|07|09|10|11|13|15|18|21|23|25|27|29|33|35|37|38|40|41|43|46|47))|(85(08|09|12|14|17|21|27|28|37|01|02|06|11|24|00|03|04|05|07|10|13|15|16|18|19|20|22|23|25|26|29|30|31|32|33|34|35|36|38))|(86(00|05|07|10|11|18|19|03|16|17|01|02|04|06|08|09|12|13|14|15))|(91(20|21|22|23|24|25|26|27|28|29|30|31|32|33|34|35|36))|(38(93)))$

# old_pattern:
# ^(UNLISTED|2|(34(59|61|62|63|65|66|71|72|73|74|75|76))|(36(00|01|02|03|05|06|07|08|10|11|12|13|14|15|16|17|18|19|20|21|22|23|24|25|26|27|28|29|30|31|32|33|34|35|36|37|38|39|40))|(37(00|01|02|03|04|05|06|07|08|09|10|11|12|13|14|15|16|17|18|19|20|21|22|23|24|25|26|27|28|29|30|31|32|33|34|35|36|37|38|39|40|41|42|43|44|45|46|47|48|49|50|51|52|53|54|55|56|57|58|59|60|61|62|63|64|65|66|67|68|69|70|71|72|73|74|75|76|77|78|79|80|81|82|83|84|85|86|87|88|89|90|91|92|93|94|95|96|97|98|99))|(38(93))|(39(09|10|12|13|17|18|19|21|22|24|25|28|29|30|31|32|33|34|35|36|37|38|39|40|41|42|43|44|45|46|47|48|50|51|52|53|54|55|56|57|58|59|60|61|62|63|64|65|66|67|68|69|70|71|72|73|74|75|76|77|78|79|80|81|82|83|84|85|86|87|88|89|90))|(61(00|01|02|03|05|06|07|08|09|10|11|13|14|15|16|17|18|19|20|21|22|23|24|25|26|27|28|29|30|31|32|33|34|35|36|37|38|39|40|41|42|43|44|45|61|62|63|64|65|66|67|68|69|70|71|72|73|74|75|76|77|78|79|80|81|82|83|84|85|86|87|88|89|90|91|92|93|94|95|96|97|98|99))|(62(69))|(63(16|20|27|29|30|31|32|33|34|35|36|37|38|39|40|41|42|43|44|45|46|47|48|51|52|53|54|55|56|57|58|59|60|61|62|63|64|65|66|68|69|70|71|72|75|76|77|78|79|80|81|82|83|84|85|86|87|88|89|90|91|92|93|94|95|96|97|98))|(74(00|01|02|03|04|05|06|07|08|09|10|11|12|13|14|15|16|17|18|19|20|21|22|23|24|25|26|27|28|29|30|31|32|33|34|35|36|37|38|39|40|41|42|44|45|46|47|48|49|50|51|52|53|54|55|56|57|58|59|60|61|62|63|64|65|66|67|68|69|70|71|72|73|74|75|76|77|78|79|80|81|82|83|84|85|86|87|88|89))|(75(01|02|03|04|06|07|08|09|10|12|13|14|15|16|17|18|19|20|21|22|23|24|25|26|27|28|29|30|31|32|33|34|35|36|37|38|39|40|41|42|43|44|45|46|47|48|49|50|51|52|53|54|55|56|57|58|59|60|61|62|63|64|65|66|67|68|69|70|71|72|73|74|75|76|77|78|79|80|81|82|83|84|85|86|87|88|89|90|91|92|93|94|95|96|97|98|99))|(76(00|01|02|03|04|05|06|07|08|09|10|11|12|13|14|15|16|17|18|19|20|21|22|23|24|25|26|27|28|29|30|31|32|33|34|35|36|37|38|39|40|41|42|43|44|45|47|48|49|50|51|52|53|54|55|56|57|58|59|60|61|62|63|64|65|66|67|68|69|70|71|72|73|74|75|76|77|78|79|80|81|82|83|84|85|86|87|88|89|90|91|92|93|94|95|96|97|98|99))|(77(00|01|02|03|04|05|06|07|08|09|10|11|12|13|14|15|16|17|18|19|20|21|22|23|24|25|26|27|28|29|30|31|32|33|34|35|36|37|38|39|40|41|42|43|44|45|46|47|48|49|50|51|52|53|54|55|56|57|58|59|60|61|62|63|64|65|66|67|68|69|71|72|73|74|75|76|77|78|79|80|81|82|83|84|85|86|87|88|89|90|91|92|93|94|95))|(79(00|01|02|03|04|05|06|07|08|09|10|11|12|13|14|15|16|17|18|19|20|21|22|23|24|25|26|27|28|29|30|31|32|33|34|35|36|37|38|39|40|41|42|43|44|45|46|47|48|49|50|51|52|53|54|55|56|57|58|59|60|61|62|63|64|65|66|67|68|69|70|71|72|73|74|75|76|77|78|79|80|81|82|83|84|85|86|87|88|89|90|91|92|93|94))|(80(00|01|02|03|04|05|06|07|08|09|10|11|12|13|14|15|16|17|18|19|20|21|22|23|24|25|26|27|28|29|30|31|32|33|34|35|36|37|38|39|40|41|42|43|44|45|46|47|48|49|50|51|52|53|54|55|56|57|58|59|60|61|62|63|64|65|66|67|68|69|70|71|72|73|74|75|76|77|78|79|80|81|82|83|84|85|86|87|88|89|90|91|92|93|94|95|96|97|98|99))|(81(00|01|02|03|04|05|06|07|08|09|10|11|12|13|14|15|16|17|18|19|20|21|22|23|24|25|26|27|28|29|30|31|32|33|34|35|36|37|38|39|40|41|42|43|44|45|46|47|48|49|50|51|52|53|54|55|56|57|58|59|60|61|62|63|64|65|66|67|68|69|70|71|72|73|74|75|76|77|78|79|80|81|82|83|84|85|86|87|88|89|90|91|92|93|94|95|96|97|98|99))|(82(00|01|02|03|04|05|06|07|08|09|10|11|12|13|14|15|16|17|18|19|20|21|22|23|24|25|26|27|28|29|30|31|32|33|34|35|36|37|38|39|40|41|42|43|44|45|46|47|48|49|50|51|52|53|54|55|56|57|58|59|60|61|62|63|64|65|66|67|68|69|70|71|72|73|74|75|76|77|78|79|80|81|82|83|84|85|86))|(84(00|01|02|03|04|05|06|07|08|09|10|11|12|13|14|15|16|17|18|19|20|21|22|23|24|25|26|27|28|29|30|31|32|33|34|35|36|37|38|39|40|41|42|43|44|45|46|47|48|49|50|51|52|53|54|55|56|57|58|59|60|61|62|63|64|65|66|67|68|69|70|71|72|73|74|75|76|77|78|79))|(85(00|01|02|03|04|05|06|07|08|09|10|11|12|13|14|15|16|17|18|19|20|21|22|23|24|25|26|27|28|29|30|31|32|33|34|35|36|37|38))|(86(00|01|02|03|04|05|06|07|08|09|10|11|12|13|14|15|16|17|18|19))|(91(20|21|22|23|24|25|26|27|28|29|30|31|32|33|34|35|36)))$
